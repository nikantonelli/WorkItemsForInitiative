<!DOCTYPE html>
<html>
<head>
    <title>WorkItemsForInitiative</title>

    <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.1/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("Rally.app.WorkItemsForInitiative.app",{extend:"Rally.app.App",componentCls:"app",settingsScope:"app",stateful:!0,items:[{xtype:"container",id:"headerBox",layout:"column",border:5,style:{borderColor:Rally.util.Colors.cyan,borderStyle:"solid"}},{xtype:"container",id:"piTreeBox",border:0,style:{borderColor:Rally.util.Colors.cyan,borderStyle:"solid"}},{xtype:"container",id:"piStatusBox",border:0,layout:"column",style:{borderColor:Rally.util.Colors.cyan,borderStyle:"solid"},items:[{xtype:"container",id:"piDefectStatusBox",width:200,height:200,hidden:!0},{xtype:"container",id:"piTaskStatusBox",hidden:!0}]},{xtype:"container",layout:"hbox",height:500,items:[{xtype:"container",id:"piBurnupBox",border:0,width:"50%",margin:20,style:{borderColor:Rally.util.Colors.cyan,borderStyle:"solid"}},{xtype:"container",id:"piBurndownBox",width:"50%",margin:20,border:0,style:{borderColor:Rally.util.Colors.cyan,borderStyle:"solid"}}]},{xtype:"container",id:"piTestCaseBox",border:0,style:{borderColor:Rally.util.Colors.cyan,borderStyle:"solid"}},{xtype:"container",id:"piTaskBox",border:0,style:{borderColor:Rally.util.Colors.cyan,borderStyle:"solid"}},{xtype:"container",id:"piDefectBox",border:0,style:{borderColor:Rally.util.Colors.cyan,borderStyle:"solid"}},{xtype:"container",id:"piStoryBox",border:0,style:{borderColor:Rally.util.Colors.cyan,borderStyle:"solid"}}],itmStr:"",objStr:[],appConfig:{useLowestPiDates:!0,autoSelectAll:!0,ignoreType:!1},portfolioIds:null,workItems:null,chsrDlg:null,lowestPiName:"",getState:function(){return{itmStr:this.itmStr,objStr:this.objStr,appConfig:this.appConfig}},applyState:function(e){this.itmStr=e.itmStr,this.objStr=e.objStr,this.appConfig=e.appConfig},_findAllLowestLevelPIs:function(e){e.typeStore?_.each(e.typeStore.data.items,function(t){0===t.get("Ordinal")&&(e.lowestPiName=t.get("TypePath"))}):Rally.ui.notify.Notifier.show({message:"Portfolio Type Hierarchy not available. Try and reload page"});Ext.getCmp("typeSelector").rawValue,Ext.create("Rally.data.lookback.SnapshotStore",{autoLoad:!0,storeId:"piStore",fetch:["FormattedID","Name","Children","ScheduleState","PlanEstimate","PlannedStartDate","PlannedEndDate"],hydrate:["FormattedID","Name","ScheduleState","PlannedStartDate","PlannedEndDate"],filters:[{property:"_ItemHierarchy",operator:"$in",value:e.objStr},{property:"_TypeHierarchy",value:e.lowestPiName},{property:"__At",value:"current"}],listeners:{load:function(t,a,r){e.portfolioIds=a,e._updateDetailsPanes(e)}}})},_doArtifactChooserDialog:function(e){e.chsrDlg&&e.chsrDlg.destroy(),artifactType="PortfolioItem",title="Choose ",!1===Ext.getCmp("ignoreType").value&&(artifactType+="/"+Ext.getCmp("typeSelector").rawValue,title+=Ext.getCmp("typeSelector").rawValue),e.chsrDlg=Ext.create("Rally.ui.dialog.SolrArtifactChooserDialog",{artifactTypes:artifactType,autoShow:!0,height:400,title:title+" item(s)",multiple:!0,storeConfig:{context:e.getContext().getDataContext(),fetch:["UserStories","Name","FormattedID","TypePath","ObjectID","PortfolioItemType","PlannedStartDate","PlannedEndDate"],sorters:[{property:"PortfolioItemType",direction:"DESC"},{property:"FormattedID",direction:"ASC"}]},listeners:{artifactchosen:function(t,a){var r="",o=[];e.workItems=a,a.forEach(function(e){delim=""===r?"":" ",r+=delim+e.get("FormattedID"),o.push(e.get("ObjectID"))}),e.itmStr=r,e.objStr=o,e.saveState(),e._findAllLowestLevelPIs(e)}}})},_piBurnupChart:function(e){Ext.getCmp("piBurnupChart")&&Ext.getCmp("piBurnupChart").destroy();var t=e.objStr,a=Ext.create("Rally.ui.chart.Chart",{id:"piBurnupChart",calculatorType:"BurnupCalculator",calculatorConfig:{completedScheduleStateNames:["Accepted","Released"],inProgressScheduleStateNames:["In-Progress"],toDoScheduleStateNames:["Triage","Defined"]},storeConfig:{find:{_TypeHierarchy:"HierarchicalRequirement",_ItemHierarchy:{$in:t},Children:null},fetch:["ScheduleState","PlanEstimate"],hydrate:["ScheduleState"]},chartColors:[Rally.util.Colors.logo_red,Rally.util.Colors.lime_med,Rally.util.Colors.blue_med,Rally.util.Colors.grey6],chartConfig:{chart:{defaultSeriesType:"area",zoomType:"xy"},title:{text:"PI Burnup"},xAxis:{categories:[],tickmarkPlacement:"on",tickInterval:10,title:{text:"Date",margin:10}},yAxis:[{title:{text:"Points"},min:0}],tooltip:{formatter:function(){return this.x+"<br />"+this.series.name+": "+this.y}},plotOptions:{series:{marker:{enabled:!1,states:{hover:{enabled:!0}}},groupPadding:.01},column:{stacking:"State",shadow:!1}}}});Ext.getCmp("piBurnupBox").add(a),Ext.getCmp("piBurnupBox").setBorder(1)},_getFirstStartDate:function(e){var t=new Date,a=e.workItems;return!0===e.appConfig.useLowestPiDates&&(a=e.portfolioIds),_.each(a,function(e){""!==e.data.PlannedStartDate&&Rally.util.DateTime.getDifference(t,new Date(e.data.PlannedStartDate),"day")>0&&(t=Ext.Date.parse(e.data.PlannedStartDate,"c"))}),t},_getLastEndDate:function(e){var t=new Date,a=e.workItems;return!0===e.appConfig.useLowestPiDates&&(a=e.portfolioIds),_.each(a,function(e){""!==e.data.PlannedEndDate&&Rally.util.DateTime.getDifference(t,new Date(e.data.PlannedEndDate),"day")<0&&(t=Ext.Date.parse(e.data.PlannedEndDate,"c"))}),t},_piDefectList:function(e){Ext.getCmp("piDefectGrid")&&Ext.getCmp("piDefectGrid").destroy();e.objStr,Ext.create("Rally.data.lookback.SnapshotStore",{autoLoad:!0,storeId:"piStore",fetch:["FormattedID","Name","ScheduleState","PlanEstimate","State"],hydrate:["FormattedID","Name","ScheduleState","PlanEstimate","State"],filters:[{property:"_ItemHierarchy",operator:"$in",value:e.objStr},{property:"_TypeHierarchy",value:"Defect"},{property:"__At",value:"current"},{property:"State",operator:"!=",value:"Closed"}],listeners:{load:function(e,t,a){_.each(t,function(e){e.set("_ref","/defect/"+e.get("ObjectID")),e.set("_type","defect")});var r=Ext.create("Rally.ui.grid.Grid",{title:"Active Defects connected to stories for selected items",id:"piDefectGrid",enableColumnMove:!0,enableColumnResize:!0,columnCfgs:[{xtype:"templatecolumn",text:"ID",dataIndex:"FormattedID",tpl:Ext.create("Rally.ui.renderer.template.FormattedIDTemplate"),width:50},{text:"Name",dataIndex:"Name"},{text:" Schedule State",dataIndex:"ScheduleState",renderer:function(e){return e}}],sortableColumns:!0,store:e});Ext.getCmp("piDefectBox").add(r),Ext.getCmp("piDefectBox").setBorder(1),Ext.getCmp("piDefectBox").setMargin(10)}}})},_defectStatusBanner:function(e,t){var a=Ext.create("Ext.Container",{xtype:"pie",id:"piDefectStatusBox",animate:!0,width:100,height:100,store:t,theme:"Base:gradients",series:[{type:"pie",angleField:"PlanEstimate",showInLegend:!0,tips:{trackMouse:!0,width:140,height:28,renderer:function(e,a){t.each(function(e){e.get("PlanEstimate")}),this.setTitle(e.get("FormattedID")+": "+e.get("PlanEstimate"))}},highlight:{segment:{margin:20}},label:{field:"name",display:"rotate",contrast:!0,font:"18px Arial"}}]});Ext.getCmp("piDefectStatusBox").add(a),Ext.getCmp("piDefectStatusBox").show()},_piUserList:function(e){Ext.getCmp("piUserStoryGrid")&&Ext.getCmp("piUserStoryGrid").destroy();e.objStr,Ext.create("Rally.data.lookback.SnapshotStore",{autoLoad:!0,storeId:"piStore",fetch:["FormattedID","Name","ScheduleState","PlanEstimate"],hydrate:["FormattedID","Name","ScheduleState","PlanEstimate"],filters:[{property:"_ItemHierarchy",operator:"$in",value:e.objStr},{property:"_TypeHierarchy",value:"HierarchicalRequirement"},{property:"__At",value:"current"},{property:"ScheduleState",operator:"<",value:"Accepted"}],listeners:{load:function(e,t,a){_.each(t,function(e){e.set("_ref","/hierarchicalrequirement/"+e.get("ObjectID")),e.set("_type","userstory")});var r=Ext.create("Rally.ui.grid.Grid",{title:"Stories not yet Accepted for selected items",id:"piUserStoryGrid",enableColumnMove:!0,enableColumnResize:!0,columnCfgs:[{xtype:"templatecolumn",text:"ID",dataIndex:"FormattedID",tpl:Ext.create("Rally.ui.renderer.template.FormattedIDTemplate"),width:50},{text:"Name",dataIndex:"Name",flex:1},{text:" Schedule State",dataIndex:"ScheduleState",renderer:function(e){return e}}],sortableColumns:!0,store:e});Ext.getCmp("piStoryBox").add(r),Ext.getCmp("piStoryBox").setMargin(10),Ext.getCmp("piStoryBox").setBorder(1)}}})},_piBLockersList:function(e){Ext.getCmp("piBlockerGrid")&&Ext.getCmp("piBlockerGrid").destroy();e.objStr,Ext.create("Rally.data.lookback.SnapshotStore",{autoLoad:!0,storeId:"piStore",fetch:["FormattedID","Name","Blocked","BlockedReason","ToDo"],hydrate:["FormattedID","Name","Blocked","BlockedReason","ToDo"],filters:[{property:"_ItemHierarchy",operator:"$in",value:e.objStr},{property:"_TypeHierarchy",value:"Task"},{property:"Blocked",value:!0},{property:"__At",value:"current"}],listeners:{load:function(e,t,a){_.each(t,function(e){e.set("_ref","/task/"+e.get("ObjectID")),e.set("_type","task")});var r=Ext.create("Rally.ui.grid.Grid",{title:"Blocked Tasks",id:"piBlockerGrid",enableColumnMove:!0,enableColumnResize:!0,columnCfgs:[{xtype:"templatecolumn",text:"ID",dataIndex:"FormattedID",tpl:Ext.create("Rally.ui.renderer.template.FormattedIDTemplate"),width:50},{text:"Name",dataIndex:"Name",flex:1},{text:"Blocked Reason",dataIndex:"BlockedReason"},{text:"To Do",dataIndex:"ToDo"}],sortableColumns:!0,store:e});Ext.getCmp("piTaskBox").add(r),Ext.getCmp("piTaskBox").setMargin(10),Ext.getCmp("piTaskBox").setBorder(1)}}})},_piTestCaseList:function(e){Ext.getCmp("piTestCaseGrid")&&Ext.getCmp("piTestCaseGrid").destroy();e.objStr,Ext.create("Rally.data.lookback.SnapshotStore",{autoLoad:!0,storeId:"piStore",fetch:["FormattedID","Name","LastVerdict","LastRun","Type","DefectStatus","Defects"],filters:[{property:"_ItemHierarchy",operator:"$in",value:e.objStr},{property:"_TypeHierarchy",value:"TestCase"},{property:"__At",value:"current"}],listeners:{load:function(e,t,a){_.each(t,function(e){e.set("_ref","/testcase/"+e.get("ObjectID")),e.set("_type","testcase")});var r=Ext.create("Rally.ui.grid.Grid",{title:"TestCases",id:"piTestCaseGrid",enableColumnMove:!0,enableColumnResize:!0,columnCfgs:[{xtype:"templatecolumn",text:"ID",dataIndex:"FormattedID",tpl:Ext.create("Rally.ui.renderer.template.FormattedIDTemplate"),minWidth:50},{text:"Name",dataIndex:"Name"},{text:"Type",dataIndex:"Type"},{xtype:"templatecolumn",text:"Last Verdict",dataIndex:"LastVerdict",tpl:Ext.create("Rally.ui.renderer.template.LastVerdictTemplate")},{xtype:"templatecolumn",text:"Defect Status",dataIndex:"DefectStatus",tpl:Ext.create("Rally.ui.renderer.template.status.DefectStatusTemplate")}],sortableColumns:!0,store:e});Ext.getCmp("piTestCaseBox").add(r),Ext.getCmp("piTestCaseBox").setMargin(10),Ext.getCmp("piTestCaseBox").setBorder(1)}}})},_piBurndownChart:function(e){Ext.getCmp("piBurndownChart")&&Ext.getCmp("piBurndownChart").destroy();var t=e.objStr;1!==e.itmStr.split(" ").length&&Rally.ui.notify.Notifier.show({message:"Re-select a single item to get a meaningful Burndown Chart"});var a=Ext.create("Rally.ui.chart.Chart",{id:"piBurndownChart",storeType:"Rally.data.lookback.SnapshotStore",storeConfig:{find:{_TypeHierarchy:"HierarchicalRequirement",_ItemHierarchy:{$in:t},Children:null},fetch:["ScheduleState","PlanEstimate","ObjectId","_ValidFrom","_ValidTo","To Do"],hydrate:["ScheduleState"],sort:{_ValidFrom:1},compress:!0,useHttpPost:!0},calculatorType:"BurndownCalculator",calculatorConfig:{timeZone:"GMT",completedScheduleStateNames:["Accepted","Released"],enableProjections:!0,startDate:e._getFirstStartDate(e),endDate:e._getLastEndDate(e)},chartColors:[Rally.util.Colors.logo_red,Rally.util.Colors.blue_med,Rally.util.Colors.lime_med,Rally.util.Colors.grey6],chartConfig:{chart:{zoomType:"xy"},title:{text:"PI Burndown (Planned Estimate)"},xAxis:{categories:[],tickmarkPlacement:"on",tickInterval:14,title:{text:"Days",margin:12},maxPadding:.25,labels:{x:0,y:20,overflow:"justify"}},yAxis:[{title:{text:"Points"},min:0}],tooltip:{formatter:function(){var e=parseFloat(this.y),t=this.y;return isNaN(e)||(t=Math.floor(100*e)/100),this.x+"<br />"+this.series.name+": "+t}},plotOptions:{series:{marker:{enabled:!1,states:{hover:{enabled:!0}}},connectNulls:!0},column:{pointPadding:0,borderWidth:0,stacking:null,shadow:!1}}}});Ext.getCmp("piBurndownBox").add(a),Ext.getCmp("piBurndownBox").setBorder(1)},_piTreeList:function(e){Ext.getCmp("piHierarchy")&&Ext.getCmp("piHierarchy").destroy();var t=[];_.each(e.objStr,function(e){t.push({property:"ObjectID",value:e})}),console.log(t);var a="portfolioitem/"+Ext.getCmp("typeSelector").rawValue,r=Ext.create("Rally.ui.tree.PortfolioTree",{id:"piHierarchy",topLevelModel:a,enableDragAndDrop:!1,readOnly:!0,topLevelStoreConfig:{filters:Rally.data.wsapi.Filter.or(t),fetch:["FormattedID","Name","c_ProgressUpdate","PlannedStartDate","PlannedEndDate","PercentDoneByStoryCount","Children","ScheduleState","PlanEstimate","State"]},emptyText:" No items of type "+a+" selected"});Ext.getCmp("piTreeBox").add(r),Ext.getCmp("piTreeBox").setBorder(1),Ext.getCmp("piTreeBox").setMargin(10)},_updateDetailsPanes:function(e){e._piTreeList(e),e._piBurnupChart(e),e._piBurndownChart(e),e._piDefectList(e),e._piUserList(e),e._piBLockersList(e),e._piTestCaseList(e)},typeStore:null,launch:function(){var e=this,t=Ext.create("Rally.ui.CheckboxField",{fieldLabel:"Ignore Type",id:"ignoreType",value:e.appConfig.ignoreType,margin:10,listeners:{change:function(t,a,r){e.appConfig.ignoreType=t.value,e.saveState()}}}),a=Ext.create("Rally.ui.CheckboxField",{fieldLabel:"Use Plan Dates of lowest PI type",id:"useLowestPiDates",value:e.appConfig.useLowestPiDates,margin:10,listeners:{change:function(t,a,r){e.appConfig.useLowestPiDates=t.value,e.saveState(),e._updateDetailsPanes(e)}}}),r=Ext.create("Rally.ui.combobox.PortfolioItemTypeComboBox",{id:"typeSelector",margin:10,listeners:{ready:function(){e.typeStore=Ext.getCmp("typeSelector").store,e.itmStr&&e.objStr&&e._updateDetailsPanes(e),Ext.getCmp("headerBox").add({xtype:"rallybutton",margin:10,id:"doitButton",text:"Select Item(s)",handler:function(){e._doArtifactChooserDialog(e)}}),Ext.getCmp("headerBox").add(t),Ext.getCmp("headerBox").add(a)}}});Ext.getCmp("headerBox").insert(0,r)}});
                Ext.define("DateMixin",{dateFormatters:[{key:"MMM",value:"%b"},{key:"MM",value:"%m"},{key:"dd",value:"%d"},{key:"yyyy",value:"%Y"}],dateToStringDisplay:function(t){return Ext.Date.format(t,"m/d/Y")},dateToString:function(t){return Ext.Date.format(t,"Y-m-d\\TH:i:s.u\\Z")},dateStringToObject:function(t){var e;return t.indexOf("T")>-1&&(t=t.slice(0,t.indexOf("T"))),e=this._splitDateParts(t),new Date(e.year,e.month,e.day)},_splitDateParts:function(t){return this._shouldSplitOnDash(t)?this._objectFromYearFirstDate(t.split("-")):this._objectFromMonthFirstDate(t.split("/"))},_objectFromYearFirstDate:function(t){return 3!==t.length?{year:0,month:0,day:0}:(t[1]=(parseInt(t[1],10)-1).toString(),{year:t[0],month:t[1],day:t[2]})},_objectFromMonthFirstDate:function(t){return 3!==t.length?{year:0,month:0,day:0}:(t[0]=(parseInt(t[0],10)-1).toString(),{month:t[0],day:t[1],year:t[2]})},_shouldSplitOnDash:function(t){return 3===t.split("-").length}});
                Ext.define("BurnupCalculator",{extend:"Rally.data.lookback.calculator.TimeSeriesCalculator",config:{completedScheduleStateNames:["Accepted"],inProgressScheduleStateNames:["In Progress","Completed"],toDoScheduleStateNames:["Backlog","Defined"]},constructor:function(e){this.initConfig(e),this.callParent(arguments)},getDerivedFieldsOnInput:function(){var e=this.getCompletedScheduleStateNames(),t=this.config.inProgressScheduleStateNames,n=this.config.toDoScheduleStateNames;return[{as:"Planned",f:function(e){return e.PlanEstimate?e.PlanEstimate:0}},{as:"PlannedCompleted",f:function(t){return _.contains(e,t.ScheduleState)&&t.PlanEstimate?t.PlanEstimate:0}},{as:"PlannedInProgress",f:function(e){return _.contains(t,e.ScheduleState)&&e.PlanEstimate?e.PlanEstimate:0}},{as:"PlannedToDo",f:function(e){return _.contains(n,e.ScheduleState)&&e.PlanEstimate?e.PlanEstimate:0}}]},getMetrics:function(){return[{field:"PlannedToDo",as:"To Do",f:"sum",display:"column"},{field:"PlannedInProgress",as:"In-progress",f:"sum",display:"column"},{field:"PlannedCompleted",as:"Accepted",f:"sum",display:"column"},{field:"Planned",as:"Planned",display:"line",f:"sum"}]}});
                Ext.define("BurndownCalculator",{extend:"Rally.data.lookback.calculator.TimeSeriesCalculator",mixins:["DateMixin"],getDerivedFieldsOnInput:function(){var e=this.config.completedScheduleStateNames,t=this.config.chartAggregationType;return[{as:"RemainingPoints",f:function(i){var r=i.ScheduleState;if(e.indexOf(r)<0){if("storycount"===t)return 1;if(i.PlanEstimate)return i.PlanEstimate}return 0}},{as:"AcceptedPoints",f:function(i){var r=i.ScheduleState;if(e.indexOf(r)>-1){if("storycount"===t)return 1;if(i.PlanEstimate)return i.PlanEstimate}return 0}}]},getMetrics:function(){return[{field:"RemainingPoints",as:"To Do",f:"sum"},{field:"AcceptedPoints",as:"Accepted",f:"sum"}]},getSummaryMetricsConfig:function(){return[{as:"Scope_max",f:function(e){var t=0,i=0;for(i=0;i<e.length;i++)e[i].Accepted+e[i]["To Do"]>t&&(t=e[i].Accepted+e[i]["To Do"]);return t}}]},getDerivedFieldsAfterSummary:function(){return[{as:"Ideal",f:function(e,t,i,r){var n,a=i.Scope_max,o=r.length-1;return 0===o?a:(n=a/o,Math.floor(100*(a-t*n))/100)},display:"line"},{as:"Prediction",f:function(e,t,i,r){return null},display:"line",dashStyle:"Dash"}]},getProjectionsConfig:function(){var e=(Rally.util.DateTime.fromIsoString(this.config.endDate).getTime()-Rally.util.DateTime.fromIsoString(this.config.startDate).getTime())/864e5,t=Ext.Date.add(Rally.util.DateTime.fromIsoString(this.config.startDate),Ext.Date.DAY,2*Math.floor(e)-1),i=Ext.Date.add(Rally.util.DateTime.fromIsoString(this.config.endDate),Ext.Date.DAY,-1);return void 0===this.projectionsConfig&&(this.projectionsConfig={doubleTimeboxEnd:t,timeboxEnd:i,series:[{as:"Prediction",field:"To Do"}],continueWhile:function(e){var t=Rally.util.DateTime.fromIsoString(e.tick),i=this.series[0].slope>=0?this.timeboxEnd:this.doubleTimeboxEnd;return e.Prediction>0&&t<i}}),this.projectionsConfig},_firstNonZero:function(e){var t;for(t=0;t<e.length;t++)if(e[t]>0)return t;return 0},_leastSquares:function(e,t,i){var r,n,a=i+1-t,o=0,s=0,l=0,f=0;for(r=t;r<=i;r++)o+=r,s+=r*r,l+=e[r],e[r]*e[r],f+=r*e[r];return{slope:n=(a*f-o*l)/(a*s-o*o),yintercept:l/a-n*(o/a)}},runCalculation:function(e){var t=this.callParent(arguments);if(t&&t.projections){var i=t.series[0].data,r=this._firstNonZero(i),n=i.length-1-t.projections.pointsAddedCount,a=this._leastSquares(i,r,n);this.projectionsConfig.series[0].slope=a.slope;for(var o=r,s=a.slope*o+a.yintercept+t.series[0].data[0]-(a.slope*n+a.yintercept);o<=i.length;)t.series[3].data[o]=s,o++,s=a.slope*o+a.yintercept+t.series[0].data[0]-(a.slope*n+a.yintercept);if(a.slope>0){var l=1.25*t.series[2].Scope_max;if(_.max(t.series[3].data)>l){var f,c=l;for(f=0;f<t.series[3].data.length;f++)t.series[3].data[f]>l&&(t.series[3].data[f]=c,c=null)}}}return new Date<this.config.endDate&&this._recomputeIdeal(t,this.config.endDate),t},_recomputeIdeal:function(e,t){var i;if(!(e.categories.length<1||this.workDays.length<1)){var r=Ext.Date.parse(e.categories[e.categories.length-1],"Y-m-d");if(t>r){i=e.categories.length;for(var n=Ext.Date.add(r,Ext.Date.DAY,1);n<t;){for(;-1===this.workDays.indexOf(Ext.Date.format(n,"l"));)n=Ext.Date.add(n,Ext.Date.DAY,1);n<t&&(e.categories[i++]=Ext.Date.format(n,"Y-m-d")),n=Ext.Date.add(n,Ext.Date.DAY,1)}i=e.categories.length-1}else if(-1===(i=this._indexOfDate(e,t)))for(;-1===this.workDays.indexOf(Ext.Date.format(t,"l"));)t=Ext.Date.add(t,Ext.Date.DAY,-1),i=this._indexOfDate(e,t);if(!(i<0)){var a,o=e.series[2].data;for(a=1;a<i;a++)o[a]=null;o[i]=0}}},_indexOfDate:function(e,t){var i=Ext.Date.format(t,"Y-m-d");return e.categories.indexOf(i)},_removeFutureSeries:function(e,t,i){if(e.series[t].data.length>i)for(;++i<e.series[t].data.length;)e.series[t].data[i]=null},_projectionsSlopePositive:function(e){return!e.projections||!e.projections.series||e.projections.series[0].slope>=0}});

            Rally.launchApp('Rally.app.WorkItemsForInitiative.app', {
                name:"WorkItemsForInitiative",
                parentRepos:"",
                version:"0.1.1"
            });

        });
    </script>


    <style type="text/css">
        
    </style>
</head>
<body>
</body>
</html>
